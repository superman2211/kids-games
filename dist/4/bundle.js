"use strict";(()=>{var s=document.getElementById("c"),r=s.getContext("2d"),i=Math.max(Math.min(devicePixelRatio,2),1);console.log("dpr",i);function w(){let e=window.innerWidth,n=window.innerHeight;s.width=e*i,s.height=n*i,s.style.width=`${e}px`,s.style.height=`${n}px`}window.addEventListener("resize",w);w();var a={x:1e3,y:1e3},d={x:120,y:120},g=70,b=200,v=10,y=4,m=["red","green","blue","yellow"],z=[],o={box:{position:{x:0,y:0},size:d},color:""};function _(){let e=(a.x-y*d.x-(y-1)*g)/2,n=(a.y-d.y-b-d.y)/2;for(let c=0;c<y;c++)z[c]={box:{position:{x:e,y:n},size:d},color:m[c]},e+=d.x+g;o.box.position.x=(a.x-d.x)/2,o.box.position.y=n+d.y+b,o.color=m[0]}_();var t={position:{x:0,y:0},pressed:!1,pressed_changed:!1},p={x:0,y:0},h=!1;s.addEventListener("mousedown",e=>{t.position.x=e.clientX*i,t.position.y=e.clientY*i,t.pressed=!0,t.pressed_changed=!0,e.preventDefault()});s.addEventListener("mousemove",e=>{t.position.x=e.clientX*i,t.position.y=e.clientY*i,t.pressed_changed=!1,e.preventDefault()});s.addEventListener("mouseup",e=>{t.position.x=e.clientX*i,t.position.y=e.clientY*i,t.pressed=!1,t.pressed_changed=!0,e.preventDefault()});s.addEventListener("mouseleave",e=>{t.position.x=e.clientX*i,t.position.y=e.clientY*i,t.pressed=!1,t.pressed_changed=!0,e.preventDefault()});s.addEventListener("touchstart",e=>{let n=e.touches[0];t.position.x=n.clientX*i,t.position.y=n.clientY*i,t.pressed=!0,t.pressed_changed=!0,e.preventDefault()});s.addEventListener("touchmove",e=>{let n=e.touches[0];t.position.x=n.clientX*i,t.position.y=n.clientY*i,t.pressed_changed=!1,e.preventDefault()});s.addEventListener("touchend",e=>{t.pressed=!1,t.pressed_changed=!0,e.preventDefault()});function E(){r.resetTransform(),r.clearRect(0,0,s.width,s.height);let e=s.width/a.x,n=s.height/a.y,c=Math.min(e,n),u=(s.width-a.x*c)/2,f=(s.height-a.y*c)/2;r.setTransform(c,0,0,c,u,f);let l={x:(t.position.x-u)/c,y:(t.position.y-f)/c};for(let x of z)r.strokeStyle=x.color,r.lineWidth=v,r.strokeRect(x.box.position.x,x.box.position.y,x.box.size.x,x.box.size.y);if(r.fillStyle=o.color,r.fillRect(o.box.position.x,o.box.position.y,o.box.size.x,o.box.size.y),r.strokeStyle=o.color,r.lineWidth=v,r.strokeRect(o.box.position.x,o.box.position.y,o.box.size.x,o.box.size.y),h)if(t.pressed){let x=l.x-p.x,L=l.y-p.y;o.box.position.x+=x,o.box.position.y+=L,p.x=l.x,p.y=l.y}else h=!1,console.log("drag end");else t.pressed&&t.pressed_changed&&o.box.position.x<l.x&&l.x<o.box.position.x+o.box.size.x&&o.box.position.y<l.y&&l.y<o.box.position.y+o.box.size.y&&(h=!0,p.x=l.x,p.y=l.y,console.log("drag start"));r.fillStyle="white",r.fillRect(l.x-15,l.y-15,30,30),requestAnimationFrame(E)}requestAnimationFrame(E);})();
//# sourceMappingURL=bundle.js.map
